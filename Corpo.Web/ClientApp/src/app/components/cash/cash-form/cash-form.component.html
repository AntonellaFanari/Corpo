<section class="wrapper" *ngIf="!openingView">
  <div class="row mt">
    <div class="col-md-12">
      <section id="no-more-tables">
        <hr>
        <table class="table table-bordered">
          <tbody>
            <tr [ngClass]="{'header-cash-positve': currentCash>=0, 'header-cash-negative': currentCash<0 }">
              <th colspan="5">FECHA DE CAJA: {{cash.opening | date: 'dd/MM/yyyy'}} <br /> CAJA ACTUAL: ${{currentCash}}</th>
            </tr>
            <tr>
              <th data-title="CI" class="text-center col-lg-6"><strong>CI: ${{startingBalance}}</strong></th>
              <th data-title="SF del mes" class="text-center col-lg-6"><strong>Saldo final del mes: ${{monthlyCash}}</strong></th>
            </tr>
            <tr>
              <th data-title="Ingresos" class="text-center"><strong>ENTRADAS: ${{feeTotalPay + saleTotalPay + incomeTotal}}</strong> </th>
              <th data-title="Egresos" class="text-center"><strong>SALIDAS: ${{outflowTotalPay + withdrawalTotal}}</strong></th>
            </tr>
          </tbody>
        </table>
        <table class="table table-bordered table-condensed cf">
          <thead class="cf">

            <tr class="scrollme">
              <th colspan="1" class="bg-info text-center td-button text-white" [routerLink]="['/cuota-agregar']">
                Cuotas
              </th>
              <th colspan="1" class="bg-success text-center td-button text-white" [routerLink]="['/venta-agregar']">
                Ventas
              </th>
              <th colspan="1" class="bg-warning text-center td-button text-white" [routerLink]="['/ingreso']">
                Ingresos
              </th>
              <th colspan="1" class="bg-danger text-center td-button text-white" [routerLink]="['/egreso']" [queryParams]="{currentCash: currentCash}">
                Egresos
              </th>
              <th colspan="1" class="bg-secondary text-center td-button text-white" [routerLink]="['/retiro']" [queryParams]="{currentCash: currentCash}">
                Retiros
              </th>
            </tr>
          </thead>
          <tbody>
            <tr class="scrollme">
              <td data-title="Cuotas">
                <table class="table table-bordered table-condensed table-td">
                  <tbody>
                    <tr class="view-btn-add">
                      <td>
                        <button type="button" class="btn btn-info text-white" [routerLink]="['/cuota-agregar']">
                          <i class="fa fa-plus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    <tr *ngFor="let fee of fees; index as i">
                      <td class="cursor" (click)="getDetailFee(fee)">{{fee.pay}}</td>
                    </tr>
                    <tr class="total-responsive table-td-total">
                      <td class="bg-info cursor">Total: {{feeTotalPay}}</td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td data-title="Ventas">
                <table class="table table-bordered table-condensed cf table-td">
                  <tbody>
                    <tr class="view-btn-add">
                      <td class="view-btn-add">
                        <button type="button" class="btn btn-success" [routerLink]="['/venta-agregar']">
                          <i class="fa fa-plus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    <tr *ngFor="let sale of sales; index as i">
                      <td [ngStyle]="{'color':sale.status==2?'red':'#09b4f5'}" class="cursor" (click)="getDetailsSale(sale)">{{sale.pay}}</td>
                    </tr>
                    <tr class="total-responsive table-td-total">
                      <td class="bg-success cursor">Total: {{saleTotalPay}}</td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td data-title="Ingresos">
                <table class="table table-bordered table-condensed cf table-td">
                  <tbody>
                    <tr class="view-btn-add">
                      <td class="view-btn-add">
                        <button type="button" class="btn btn-warning text-white" [routerLink]="['/ingreso']">
                          <i class="fa fa-plus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    <tr *ngFor="let income of incomes; index as i">
                      <td class="cursor" (click)="getDetailIncome(income)">{{income.amount}}</td>
                    </tr>
                    <tr class="total-responsive table-td-total">
                      <td class="bg-warning cursor">Total: {{incomeTotal}}</td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td data-title="Egresos">
                <table class="table table-bordered table-condensed cf table-td">
                  <tbody>
                    <tr class="view-btn-add">
                      <td class="view-btn-add">
                        <button type="button" class="btn btn-danger" [routerLink]="['/egreso']" [queryParams]="{currentCash: currentCash}">
                          <i class="fa fa-plus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    <tr *ngFor="let outflow of outflows; index as i">
                      <td class="cursor" (click)="getDetailOutflow(outflow)">{{outflow.pay}}</td>
                    </tr>
                    <tr class="total-responsive table-td-total">
                      <td class="bg-danger cursor">Total: {{outflowTotalPay}}</td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td data-title="Retiros">
                <table class="table table-bordered table-condensed cf table-td">
                  <tbody>
                    <tr class="view-btn-add">
                      <td class="view-btn-add">
                        <button type="button" class="btn btn-secondary" [routerLink]="['/retiro']" [queryParams]="{currentCash: currentCash}">
                          <i class="fa fa-plus-circle"></i>
                        </button>
                      </td>
                    </tr>
                    <tr *ngFor="let withdrawal of withdrawals; index as i">
                      <td class="cursor" (click)="getDetailWithdrawal(withdrawal)">{{withdrawal.amount}}</td>
                    </tr>
                    <tr class="total-responsive table-td-total">
                      <td class="bg-secondary cursor">Total: {{withdrawalTotal}}</td>
                    </tr>
                  </tbody>
                </table>
              </td>
            </tr>
          </tbody>
          <tfoot class="total-non-responsive table-td-total">
            <tr class="scrollme">
              <td class="cursor">{{feeTotalPay}}</td>
              <td class="cursor">{{saleTotalPay}}</td>
              <td class="cursor">{{outflowTotalPay}}</td>
              <td class="cursor">{{withdrawalTotal}}</td>
              <td class="cursor">{{incomeTotal}}</td>
            </tr>
          </tfoot>
        </table>
        <div><button class="btn btn-outline-dark btn-block form-control" (click)="toClose()">Cerrar Caja</button></div>
      </section>
    </div>
    <!-- /content-panel -->
  </div>
  <!-- /col-md-12 -->
</section>
<section class="wrapper">
  <section id="no-more-tables" *ngIf="openingView">
    <table class="table table-bordered" *ngIf="cash">
      <tbody>
        <tr>
          <td colspan="6" [ngClass]="{'header-cash-positve': currentCash>=0, 'header-cash-negative': currentCash<0 }">FECHA DE CIRRE DE CAJA: {{cash.closing | date: 'dd/MM/yyyy'}}- CAJA ACTUAL: ${{currentCash}}</td>
        </tr>
        <tr class="td-height">
          <td colspan="3" class="text-center col-6"><strong>CI: ${{cash.startingBalance}}</strong></td>
          <td colspan="3" class="text-center col-6"><strong>CF: ${{cash.endingBalance}}</strong></td>
        </tr>
        <tr class="td-height">
          <td colspan="6" class="text-center"><strong>CAJA MENSUAL <br /> Saldo Final: ${{monthlyCash}}</strong></td>
        </tr>
        <tr class="td-button-opening">
          <td colspan="6" class="text-center td-button text-white"><button class="btn btn-success col-3 col-lg-2 btn-opening" type="submit" (click)="openingCash()">Abrir Caja</button></td>
        </tr>
      </tbody>
    </table>
  </section>
</section>
<app-sale-edit (updateSales)="getAllSale()"></app-sale-edit>
<app-outflow-detail (updateOutflows)="getAllOutflow()"></app-outflow-detail>
<app-fee-detail (updateFee)="getAllFee()"></app-fee-detail>
<app-withdrawal-detail (updateWithdrawal)="getAllWithdrawal()"></app-withdrawal-detail>
<app-income-detail (updateIncome)="getAllIncome()"></app-income-detail>
